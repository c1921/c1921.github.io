# 制作流程

1. OCR
2. 标题分级
3. 统一所有括号为中文括号
4. 将脚注序号的中文括号替换为英文括号
   1. 使用正则表达式`（([0-9a-z?]*)）`查找
   2. 替换为`($1)`
5. 更正标题序号括号
   1. 使用正则表达式`>\(([0-9a-z?]*)\)`查找
   2. 替换为`>（$1）`
6. 更正带圆圈数字（①②③④⑤⑥⑦⑧⑨⑩⑪⑫⑬⑭⑮⑯⑰⑱⑲⑳㉑㉒㉓㉔㉕㉖㉗㉘㉙㉚㉛㉜㉝㉞㉟㊱㊲㊳㊴㊵㊶㊷㊸㊹㊺㊻㊼㊽㊾㊿）顺序
7. 更正括号数字顺序（序与跋）
8. 整理文本，分离正文与脚注
9. 在**正文**中为脚注序号添加标签
   1. 使用正则表达式`(\([0-9a-z?]*\)|①|②|③|④|⑤|⑥|⑦|⑧|⑨|⑩|⑪|⑫|⑬|⑭|⑮|⑯|⑰|⑱|⑲|⑳|㉑|㉒|㉓|㉔|㉕|㉖|㉗|㉘|㉙|㉚|㉛|㉜|㉝|㉞|㉟|㊱|㊲|㊳|㊴|㊵|㊶|㊷|㊸|㊹|㊺|㊻|㊼|㊽|㊾|㊿)`查找
   2. 替换为`<sup class="a-footnote"><a href="#b-footnote-$1" name="a-footnote-$1">$1</a></sup>`
10. 在**脚注**中添加标签
    1. 使用正则表达式`^(\([0-9a-z?]*\)|①|②|③|④|⑤|⑥|⑦|⑧|⑨|⑩|⑪|⑫|⑬|⑭|⑮|⑯|⑰|⑱|⑲|⑳|㉑|㉒|㉓|㉔|㉕|㉖|㉗|㉘|㉙|㉚|㉛|㉜|㉝|㉞|㉟|㊱|㊲|㊳|㊴|㊵|㊶|㊷|㊸|㊹|㊺|㊻|㊼|㊽|㊾|㊿)(.*)$`查找
    2. 替换为`<div class="footnote-line"><a class="b-footnote" name="b-footnote-$1" href="#a-footnote-$1">$1</a>$2<a href="#a-footnote-$1" title="回到文档" class="reversefootnote" >↩</a></div>`
11. 标题添加 id

    1. 使用正则表达式 `<(h\d)>(.*)(</h\d>)`查找

    2. 替换为 `<$1 id="$2">$2$3`
12. 正文添加`<p>`标签
    1. 使用正则表达式`^((?!<).*)`查找
    2. 替换为`<p>$1</p>`
13. 合并正文与脚注
14. 为引用添加标签`<blockquote>` `</blockquote>`
15. 署名、日期格式
